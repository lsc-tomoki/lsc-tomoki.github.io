import{a as A}from"./index.18087e37.js";import{l as me}from"./index.1586e2f5.js";import{_ as _e,f as ge,r as a,o as c,c as g,k as ve,w as e,a as t,e as s,t as r,l as h,b as k,h as G,d as i,F as N,i as he,g as p,u as y,N as b,m as _}from"./index.d3363bee.js";const fe={props:["equip"],setup(B){const f=ge(B.equip);return{equip:f,gotoWiki:()=>{window.open(f.wikiLink,"_blank")}}}},ye=["src"],be=s(" \xA0 "),qe=i("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[i("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[i("path",{d:"M11 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-5"}),i("path",{d:"M10 14L20 4"}),i("path",{d:"M15 4h5v5"})])],-1),ke={key:0,style:{display:"inline-block","text-align":"center",width:"22px"}},we={style:{display:"inline-block","text-align":"center",width:"22px"}},xe=["src"],ze=["innerHTML"],Le=i("img",{src:"https://music-up-1313372397.cos.ap-shanghai.myqcloud.com/action/31.png"},null,-1),Te=i("img",{src:"https://music-up-1313372397.cos.ap-shanghai.myqcloud.com/action/41.png"},null,-1),Ue=i("img",{src:"https://music-up-1313372397.cos.ap-shanghai.myqcloud.com/action/191.png"},null,-1),$e=i("img",{src:"https://music-up-1313372397.cos.ap-shanghai.myqcloud.com/area/OnlyLine.png"},null,-1),Ce=i("img",{src:"https://music-up-1313372397.cos.ap-shanghai.myqcloud.com/element/rangeLine.png"},null,-1),Ee=["innerHTML"],He=["src"],Re=["src"];function Ie(B,f,V,o,U,P){const $=a("n-image"),d=a("n-icon"),C=a("n-button"),w=a("n-list-item"),x=a("n-list"),z=a("n-thing"),q=a("n-tag"),L=a("n-space"),R=a("n-text"),j=a("n-popover"),I=a("n-card");return c(),g(I,{style:{height:"100%"},hoverable:"",segmented:{action:!0},size:"small"},ve({default:e(()=>[t(z,null,{avatar:e(()=>[t($,{lazy:"","preview-disabled":"",src:o.equip.gfx},null,8,["src"])]),header:e(()=>[s(r(o.equip.title),1)]),description:e(()=>[s(" Lv: "+r(o.equip.level),1)]),"header-extra":e(()=>[i("img",{src:o.equip.typeIcon},null,8,ye),be,t(C,{size:"small",text:"",onClick:o.gotoWiki},{default:e(()=>[t(d,{size:"24"},{default:e(()=>[qe]),_:1})]),_:1},8,["onClick"])]),default:e(()=>[t(x,null,{default:e(()=>[(c(!0),k(N,null,G(o.equip.effects,m=>(c(),g(w,{style:{padding:"4px"}},{default:e(()=>[m.actionId!=304?(c(),k("div",ke,[i("div",we,[i("img",{style:{"text-align":"center","vertical-align":"middle"},src:m.icon},null,8,xe)])])):h("",!0),i("div",{style:{display:"inline-block","margin-left":"8px","vertical-align":"middle"},innerHTML:m.description},null,8,ze)]),_:2},1024))),256))]),_:1})]),_:1})]),_:2},[o.equip.use!=null&&o.equip.use.useEffects.length>0?{name:"action",fn:e(()=>[t(L,{justify:"space-between",size:"small"},{default:e(()=>[t(L,{size:"small"},{default:e(()=>[o.equip.use.ap!=0?(c(),g(q,{key:0},{icon:e(()=>[t(d,null,{default:e(()=>[Le]),_:1})]),default:e(()=>[s(" "+r(o.equip.use.ap),1)]),_:1})):h("",!0),o.equip.use.mp!=0?(c(),g(q,{key:1},{icon:e(()=>[t(d,null,{default:e(()=>[Te]),_:1})]),default:e(()=>[s(" "+r(o.equip.use.mp),1)]),_:1})):h("",!0),o.equip.use.wp!=0?(c(),g(q,{key:2},{icon:e(()=>[t(d,null,{default:e(()=>[Ue]),_:1})]),default:e(()=>[s(" "+r(o.equip.use.wp),1)]),_:1})):h("",!0)]),_:1}),t(L,{justify:"end",size:"small"},{default:e(()=>[o.equip.use.onlyLine==!0?(c(),g(q,{key:0},{icon:e(()=>[t(d,{size:"20"},{default:e(()=>[$e]),_:1})]),_:1})):h("",!0),t(q,null,{icon:e(()=>[t(d,{size:"24"},{default:e(()=>[Ce]),_:1})]),default:e(()=>[s(r(o.equip.use.minRange)+" ",1),o.equip.use.minRange!=o.equip.use.maxRange?(c(),g(R,{key:0},{default:e(()=>[s(" ~ "+r(o.equip.use.maxRange),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1}),t(x,null,{default:e(()=>[(c(!0),k(N,null,G(o.equip.use.useEffects,m=>(c(),g(w,{style:{padding:"4px"}},{default:e(()=>[i("div",{style:{display:"inline-block","margin-left":"8px","vertical-align":"middle"},innerHTML:m.description},null,8,Ee),m.sizeToolTip!=null?(c(),g(j,{key:0,trigger:"hover"},{trigger:e(()=>[m.sizeIcon!=null?(c(),k("img",{key:0,style:{"margin-left":"8px","vertical-align":"middle"},src:m.sizeIcon},null,8,He)):h("",!0)]),default:e(()=>[s(" "+r(m.sizeToolTip),1)]),_:2},1024)):h("",!0),m.sizeIcon!=null&&m.sizeToolTip==null?(c(),k("img",{key:1,style:{"margin-left":"8px","vertical-align":"middle"},src:m.sizeIcon},null,8,Re)):h("",!0)]),_:2},1024))),256))]),_:1})])}:void 0]),1024)}const Me=_e(fe,[["render",Ie]]),Se=i("div",null,null,-1),Ae=s(" \u6C83\u6C83\u67E5 "),Ne=i("br",null,null,-1),Be=i("br",null,null,-1),Ve=s("\\ "),je=i("br",null,null,-1),Oe=i("br",null,null,-1),We=i("br",null,null,-1),De=i("h2",{style:{"line-height":"1.5"}}," \u6233\u6211\u6478\u6211 ",-1),Je={__name:"GuestEquipmentView",setup(B){const f=he("$cookies"),V=Math.min(document.documentElement.clientWidth,800);function o(n){if(n[0]>n[1]){let l=n[0];n[0]=n[1],n[1]=l}}function U(){S.value=!0,o(d.value),A({method:"post",baseURL:"https://musicup.love:8443",url:"public/equipment/filter",paramsSerializer:function(n){return me.stringify(n,{arrayFormat:"repeat"})},params:{size:12,page:F.value,lang:f.get("lang"),title:$.value,minLevel:d.value[0],maxLevel:d.value[1],rarities:C.value,types:w.value,actions:x.value,logic:O.value?"intersection":"union"}}).then(function(n){T.value.push(...n.data.data.equipments),M.value=n.data.data.length,D.value=!1,!le()&&T.value.length<M.value&&U(),S.value=!1}),F.value++}function P(){F.value=1,T.value.length=0,U()}const $=p(""),d=p([0,230]),C=p([]),w=p([]),x=p([]),z=p(!1),q=()=>{z.value=!0},L=()=>{z.value=!1},R=p([]);function j(){A({method:"post",baseURL:"https://musicup.love:8443",url:"/public/rarity/options",params:{lang:f.get("lang")}}).then(function(n){R.value=n.data.data.rarityOptions})}j();const I=p([]);function m(){A({method:"post",baseURL:"https://musicup.love:8443",url:"/public/equipment_type/options",params:{lang:f.get("lang")}}).then(function(n){I.value=n.data.data.equipmentTypeOptions})}m();const J=p([]);function ee(){A({method:"post",baseURL:"https://musicup.love:8443",url:"/public/action/options",params:{lang:f.get("lang")}}).then(function(n){J.value=n.data.data.actionOptions})}ee();const O=p(!0),W=({option:n,handleClose:l})=>_(b,{style:{padding:"4px"},closable:!0,onClose:v=>{v.stopPropagation(),l()}},{default:()=>_("div",{size:"large",style:{display:"flex",alignItems:"center"}},[_("img",{src:n.icon,style:{padding:"4px",marginRight:"2px"}},null),n.label])}),te=n=>_("div",{style:{display:"flex",alignItems:"center"}},[_("img",{src:n.icon}),_("div",{style:{marginLeft:"12px",padding:"4px 0"}},[_("div",null,[n.label])])]),K=(n,l,v)=>_("div",{style:{display:"flex",alignItems:"center"}},[_("div",{style:{display:"inline-block",textAlign:"center",width:"22px"}},[_("img",{src:n.option.icon,style:{textAlign:"center",verticalAlign:"middle"}})]),_("div",{style:{marginLeft:"8px",padding:"4px 0"}},[_("div",null,[n.option.label])])]),D=p(!1),F=p(1),T=p([]),M=p(0),S=p(!0);function ne(){if(T.value.length>=M.value||D.value){S.value=!1;return}let n=document.documentElement.scrollTop,l=document.documentElement.clientHeight,v=document.documentElement.scrollHeight;n+l>v-480&&(D.value=!0,U())}addEventListener("scroll",ne);function le(){return document.documentElement.scrollHeight-20>document.documentElement.clientHeight}return U(),(n,l)=>{const v=a("n-grid-item"),ae=a("n-spin"),Q=a("n-grid"),ie=a("n-input"),E=a("n-space"),H=a("n-card"),oe=a("n-slider"),X=a("n-input-number"),se=a("n-select"),Y=a("n-tree-select"),ue=a("n-switch"),Z=a("n-button"),re=a("n-drawer-content"),ce=a("n-drawer"),de=a("n-tooltip"),pe=a("n-affix");return c(),k(N,null,[t(Q,{"x-gap":"12","y-gap":"12",cols:"100 1:1 640:2 960:3 1280:4 1600:5 1920:6 2240:7 2560:8 2880:9 3200:10 3520:11 3840:12 4160:13 4480:14 4800:15 5120:16"},{default:e(()=>[(c(!0),k(N,null,G(T.value,u=>(c(),g(v,null,{default:e(()=>[t(Me,{equip:u},null,8,["equip"])]),_:2},1024))),256)),t(v,{style:{height:"100%",width:"100%"}},{default:e(()=>[t(ae,{size:"large",show:S.value,style:{height:"100%",width:"100%"}},{default:e(()=>[Se]),_:1},8,["show"])]),_:1})]),_:1}),t(ce,{show:z.value,"onUpdate:show":l[9]||(l[9]=u=>z.value=u),"default-width":y(V),resizable:"","on-mask-click":L,"auto-focus":!1},{default:e(()=>[t(re,{title:"\u7B5B\u9009",closable:""},{header:e(()=>[Ae]),default:e(()=>[t(H,{title:n.$t("equipment.title"),size:"small"},{"header-extra":e(()=>[t(E,{size:"small"},{default:e(()=>[t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.crossLang")),1)]),_:1}),t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.upperAndLowerCase")),1)]),_:1})]),_:1})]),default:e(()=>[t(ie,{value:$.value,"onUpdate:value":l[0]||(l[0]=u=>$.value=u),type:"text"},null,8,["value"])]),_:1},8,["title"]),Ne,t(H,{title:n.$t("equipment.level"),size:"small"},{"header-extra":e(()=>[t(E,{size:"small"},{default:e(()=>[t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.closed")),1)]),_:1})]),_:1})]),default:e(()=>[t(oe,{value:d.value,"onUpdate:value":l[1]||(l[1]=u=>d.value=u),range:"",min:0,max:230,placement:"top",marks:{0:"0",80:"80",110:"110",170:"170",200:"200",230:"230"}},null,8,["value"]),t(Q,{cols:"2"},{default:e(()=>[t(v,null,{default:e(()=>[t(X,{value:d.value[0],"onUpdate:value":l[2]||(l[2]=u=>d.value[0]=u),size:"small",min:0,max:230},null,8,["value"])]),_:1}),t(v,null,{default:e(()=>[t(X,{value:d.value[1],"onUpdate:value":l[3]||(l[3]=u=>d.value[1]=u),size:"small",min:0,max:230},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["title"]),Be,t(H,{title:n.$t("equipment.rarity"),size:"small"},{"header-extra":e(()=>[t(E,{size:"small"},{default:e(()=>[t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.allSelect")),1)]),_:1})]),_:1})]),default:e(()=>[t(se,{multiple:"",clearable:"",size:"large",value:C.value,"onUpdate:value":l[4]||(l[4]=u=>C.value=u),options:R.value,"render-label":te,"render-tag":W},{default:e(()=>[Ve]),_:1},8,["value","options"])]),_:1},8,["title"]),je,t(H,{title:n.$t("equipment.type"),size:"small"},{"header-extra":e(()=>[t(E,{size:"small"},{default:e(()=>[t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.allSelect")),1)]),_:1})]),_:1})]),default:e(()=>[t(Y,{multiple:"",clearable:"",filterable:"",cascade:"",checkable:"",size:"large","show-path":!1,"expand-trigger":n.click,"check-strategy":"parent",value:w.value,"onUpdate:value":l[5]||(l[5]=u=>w.value=u),options:I.value,"render-label":K,"render-tag":W},null,8,["expand-trigger","value","options"])]),_:1},8,["title"]),Oe,t(H,{title:n.$t("equipment.action"),size:"small"},{"header-extra":e(()=>[t(E,{size:"small"},{default:e(()=>[t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.open")),1)]),_:1}),t(y(b),null,{default:e(()=>[s(r(n.$t("equipment.close")),1)]),_:1}),t(ue,{value:O.value,"onUpdate:value":l[7]||(l[7]=u=>O.value=u),round:!1},{checked:e(()=>[s(r(n.$t("equipment.intersect")),1)]),unchecked:e(()=>[s(r(n.$t("equipment.union")),1)]),_:1},8,["value"])]),_:1})]),default:e(()=>[t(Y,{multiple:"",clearable:"",filterable:"",cascade:"",checkable:"",size:"large","show-path":!1,"expand-trigger":n.click,"check-strategy":"children",options:J.value,value:x.value,"onUpdate:value":l[6]||(l[6]=u=>x.value=u),"render-label":K,"render-tag":W},null,8,["expand-trigger","options","value"])]),_:1},8,["title"]),We,t(Z,{block:"",size:"large",onClick:l[8]||(l[8]=u=>{P(),L()})},{default:e(()=>[i("h3",null,r(n.$t("equipment.button")),1)]),_:1})]),_:1})]),_:1},8,["show","default-width"]),t(pe,{"trigger-bottom":1e4,bottom:0,style:{right:"48px",bottom:"48px"}},{default:e(()=>[t(de,{trigger:"hover"},{trigger:e(()=>[t(Z,{size:"large",onClick:q,round:"",block:"",strong:"",secondary:"",type:"primary",style:{padding:"24px"}},{default:e(()=>[De]),_:1})]),default:e(()=>[s(" \u5DF2\u52A0\u8F7D "+r(T.value.length)+" / "+r(M.value)+" \u4EF6 ",1)]),_:1})]),_:1})],64)}}};export{Je as default};
